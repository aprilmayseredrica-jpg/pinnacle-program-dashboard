<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMM | The Pinnacle Program Strategy Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700;900&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --mmm-teal-dark: #00585E;
            --mmm-teal-light: #00A99D;
            --mmm-orange: #F37A20;
            --mmm-bg: #F7FDFD;
        }
        body {
            font-family: 'Source Sans 3', sans-serif;
            background-color: var(--mmm-bg);
        }
        h1, h2, h3, h4, .tab-button {
            font-family: 'Lato', sans-serif;
        }
        .main-title { color: #1e293b; }
        .subtitle { color: #475569; }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            display: flex;
            flex-direction: column;
        }
        .chart-title { color: #334155; font-weight: 700; }
        .details { color: #475569; text-align: justify; }
        .footer { color: #94a3b8; font-style: italic; font-size: 0.875rem; }
        .mmm-primary { color: var(--mmm-teal-dark); }
        .mmm-secondary { color: var(--mmm-teal-light); }
        .mmm-accent { color: var(--mmm-orange); }
        .tab-button {
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            color: var(--mmm-teal-dark);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            color: var(--mmm-teal-dark);
            border-bottom-color: var(--mmm-orange);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            max-width: 500px;
            width: 90%;
        }
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">

    <header class="text-center mb-10">
        <h1 class="text-4xl lg:text-5xl font-black main-title tracking-tight mmm-primary">The Pinnacle Program</h1>
        <p class="mt-2 text-lg subtitle" style="font-family: 'Source Sans 3', sans-serif;">A Data-Driven Strategy to Increase Revenue & Retention</p>
    </header>

    <div class="border-b border-slate-200 mb-8">
        <nav class="flex justify-center -mb-px">
            <button class="tab-button active" onclick="changeTab(event, 'mainDashboard')">Executive Dashboard</button>
            <button class="tab-button" onclick="changeTab(event, 'resignationDeepDive')">Strategic Deep Dive</button>
            <button class="tab-button" onclick="changeTab(event, 'qna')">Executive Summary & Q&A</button>
        </nav>
    </div>

    <!-- Main Dashboard Content -->
    <div id="mainDashboard" class="tab-content active">
        <div class="space-y-8">
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="card p-6 lg:col-span-3">
                    <h2 class="text-2xl font-bold main-title mb-1 mmm-primary">The State of Play</h2>
                    <p class="details mb-6">Our data on 1,011 VAs with over 90 days of tenure reveals a clear narrative: <em>VA Resignation</em> is the single largest factor driving cancellations, representing our most significant challenge and our greatest opportunity.</p>
                    <div class="chart-container flex-grow h-64">
                        <canvas id="cancellationReasonsChart"></canvas>
                    </div>
                    <p class="footer text-center mt-4">Source: All-time cancellation data for VAs past the 90-day mark.</p>
                </div>
                <div class="card p-6 lg:col-span-2">
                    <h2 class="text-2xl font-bold main-title mb-1 mmm-primary">The Pinnacle Program Fee</h2>
                     <p class="details mb-6">The fee is based on the VA's tenure, not the client's, rewarding the specific partnership duration.</p>
                    <div class="grid grid-cols-2 gap-4">
                         <div class="card p-4 border-l-4 border-teal-600 bg-slate-50">
                            <p class="text-sm font-semibold text-gray-500">Tenure: 91 Days - 1 Year</p>
                            <p class="text-2xl font-bold main-title">$25,000</p>
                        </div>
                        <div class="card p-4 border-l-4 border-teal-500 bg-slate-50">
                            <p class="text-sm font-semibold text-gray-500">Tenure: 1 - 2 Years</p>
                            <p class="text-2xl font-bold main-title">$20,000</p>
                        </div>
                        <div class="card p-4 border-l-4 border-teal-400 bg-slate-50">
                            <p class="text-sm font-semibold text-gray-500">Tenure: 2 - 3 Years</p>
                            <p class="text-2xl font-bold main-title">$15,000</p>
                        </div>
                        <div class="card p-4 border-l-4 border-amber-500 bg-slate-50">
                            <p class="text-sm font-semibold text-gray-500">Tenure: 3+ Years</p>
                            <p class="text-2xl font-bold main-title">$10,000</p>
                        </div>
                    </div>
                </div>
            </div>
             <div class="card p-6">
                <h2 class="text-2xl font-bold main-title mb-4 text-center mmm-primary">The Financial Justification</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                    <div class="lg:col-span-1">
                         <div class="text-center">
                            <h3 class="chart-title mb-2">The Pareto Principle in Action</h3>
                            <p class="details mb-4 text-center">A small group of successful, long-term VAs represents the vast majority of our controllable churn risk.</p>
                            <div class="chart-container h-48">
                                <canvas id="paretoChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-1 text-center border-x-2 border-slate-100 px-8">
                         <h3 class="chart-title mb-2">Projected Financial Impact</h3>
                         <p class="text-5xl md:text-6xl font-black mmm-primary my-4">$1.66M</p>
                         <p class="font-semibold subtitle">Projected Profit (Jan 2024 - Sep 2025)</p>
                         <p class="details text-sm mt-2">Based on converting a conservative 20% of applicable VA resignations into Pinnacle Program partnerships.</p>
                    </div>
                     <div class="lg:col-span-1">
                        <h3 class="chart-title mb-4 text-center">The "Win-Win-Win" Scenario</h3>
                        <ul class="space-y-4">
                             <li class="flex items-center">
                                <div class="flex-shrink-0 h-12 w-12 rounded-full bg-teal-50 flex items-center justify-center">
                                    <svg class="h-6 w-6 mmm-secondary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 4h5m-5 4h5m-5-4h.01M9 7h.01M13 7h.01M13 11h.01M13 15h.01M17 7h.01M17 11h.01M17 15h.01" /></svg>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold main-title">The Client Wins</h4>
                                    <p class="details text-sm">Retains a proven, invaluable team member.</p>
                                </div>
                            </li>
                             <li class="flex items-center">
                                <div class="flex-shrink-0 h-12 w-12 rounded-full bg-teal-50 flex items-center justify-center">
                                     <svg class="h-6 w-6 mmm-secondary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold main-title">The VA Wins</h4>
                                     <p class="details text-sm">Achieves their ultimate career goal.</p>
                                </div>
                            </li>
                             <li class="flex items-center">
                                <div class="flex-shrink-0 h-12 w-12 rounded-full bg-teal-50 flex items-center justify-center">
                                    <svg class="h-6 w-6 mmm-secondary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" /></svg>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold main-title">MMM Wins</h4>
                                    <p class="details text-sm">Converts a loss into a profit center.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
             <div class="card p-6">
                 <h2 class="text-2xl font-bold main-title mb-1 mmm-primary">Our Strategic 4-Phase Rollout Plan</h2>
                 <p class="details mb-8">A methodical, proactive launch over the next quarter will ensure a smooth transition for existing clients and establish the policy as a premium feature for new business.</p>
                 <div class="relative">
                     <!-- Timeline Line -->
                     <div class="absolute left-1/2 -ml-0.5 w-1 h-full bg-slate-200 hidden md:block"></div>
                     <div class="space-y-12 md:space-y-8">
                         <!-- Phase 1 -->
                         <div class="md:grid md:grid-cols-2 md:gap-x-8 items-center">
                             <div class="md:text-right md:pr-8">
                                 <p class="font-bold text-lg mmm-primary">Phase 1: Internal Prep</p>
                                 <p class="font-semibold subtitle">Next 30 Days</p>
                             </div>
                             <div class="relative">
                                 <div class="absolute w-6 h-6 rounded-full bg-white border-4 border-teal-500 left-1/2 -ml-3 -top-3 md:top-auto md:-left-3 md:top-1/2 md:-mt-3 hidden md:block"></div>
                                 <div class="bg-slate-100 p-4 rounded-lg mt-4 md:mt-0 md:ml-8">
                                     <ul class="list-disc list-inside details text-sm">
                                         <li>Finalize Legal Agreements</li>
                                         <li>Train Sales & Client Success Teams</li>
                                         <li>Update CRM & Internal Systems</li>
                                     </ul>
                                 </div>
                             </div>
                         </div>
                          <!-- Phase 2 -->
                         <div class="md:grid md:grid-cols-2 md:gap-x-8 items-center">
                             <div class="md:col-start-2 md:text-left md:pl-8">
                                  <p class="font-bold text-lg mmm-secondary">Phase 2: New Clients & VAs</p>
                                 <p class="font-semibold subtitle">Starting Oct 2025</p>
                             </div>
                             <div class="relative md:col-start-1 md:row-start-1">
                                  <div class="absolute w-6 h-6 rounded-full bg-white border-4 border-teal-500 left-1/2 -ml-3 -top-3 md:top-auto md:-right-3 md:left-auto md:top-1/2 md:-mt-3 hidden md:block"></div>
                                 <div class="bg-slate-100 p-4 rounded-lg mt-4 md:mt-0 md:mr-8">
                                     <ul class="list-disc list-inside details text-sm">
                                         <li>Implement New Agreements</li>
                                         <li>Integrate into Sales Process</li>
                                         <li>Onboard VAs with New ICA</li>
                                     </ul>
                                 </div>
                             </div>
                         </div>
                           <!-- Phase 3 -->
                         <div class="md:grid md:grid-cols-2 md:gap-x-8 items-center">
                              <div class="md:text-right md:pr-8">
                                 <p class="font-bold text-lg mmm-primary">Phase 3: Existing Clients</p>
                                 <p class="font-semibold subtitle">Oct - Dec 2025</p>
                             </div>
                             <div class="relative">
                                 <div class="absolute w-6 h-6 rounded-full bg-white border-4 border-teal-500 left-1/2 -ml-3 -top-3 md:top-auto md:-left-3 md:top-1/2 md:-mt-3 hidden md:block"></div>
                                 <div class="bg-slate-100 p-4 rounded-lg mt-4 md:mt-0 md:ml-8">
                                     <ul class="list-disc list-inside details text-sm">
                                          <li>Segment Clients by VA Tenure</li>
                                          <li>Conduct Proactive 10-Month Reviews</li>
                                          <li>Use Personalized Communication</li>
                                     </ul>
                                 </div>
                             </div>
                         </div>
                           <!-- Phase 4 -->
                          <div class="md:grid md:grid-cols-2 md:gap-x-8 items-center">
                             <div class="md:col-start-2 md:text-left md:pl-8">
                                 <p class="font-bold text-lg mmm-secondary">Phase 4: Ongoing Management</p>
                                 <p class="font-semibold subtitle">Starting Jan 2026</p>
                             </div>
                             <div class="relative md:col-start-1 md:row-start-1">
                                  <div class="absolute w-6 h-6 rounded-full bg-white border-4 border-teal-500 left-1/2 -ml-3 -top-3 md:top-auto md:-right-3 md:left-auto md:top-1/2 md:-mt-3 hidden md:block"></div>
                                 <div class="bg-slate-100 p-4 rounded-lg mt-4 md:mt-0 md:mr-8">
                                     <ul class="list-disc list-inside details text-sm">
                                         <li>Track KPIs Quarterly (Revenue, Retention)</li>
                                         <li>Gather Client & VA Feedback</li>
                                         <li>Conduct Annual Review of Fee Structure</li>
                                     </ul>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
            </div>
        </div>
    </div>

    <!-- Resignation Deep Dive Content -->
    <div id="resignationDeepDive" class="tab-content">
        <div class="space-y-8">
            <div class="card p-6">
                 <h2 class="text-2xl font-bold main-title mb-4 text-center mmm-primary">Forecasting the Opportunity</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                    <div class="chart-container h-80">
                         <canvas id="monthlyTrendsChartDetail"></canvas>
                         <p class="footer text-center mt-2">Source: All-time monthly cancellation data.</p>
                    </div>
                    <div>
                         <table class="w-full text-left border-collapse">
                            <thead>
                                <tr>
                                    <th class="p-3 font-bold uppercase bg-teal-50 text-teal-800 border border-teal-200">Period</th>
                                    <th class="p-3 font-bold uppercase bg-teal-50 text-teal-800 border border-teal-200">Insights & Justification</th>
                                    <th class="p-3 font-bold uppercase bg-teal-50 text-teal-800 border border-teal-200">MMM Recommendation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white">
                                    <td class="p-3 font-semibold border border-slate-200 align-top">Q1 (Jan-Mar)</td>
                                    <td class="p-3 border border-slate-200 align-top text-sm details">US clients finalize new annual budgets. Filipino VAs become active job-seekers after receiving their legally mandated "13th month pay" in December. This creates a <em>perfect storm</em> for strategic buyouts.</td>
                                    <td class="p-3 border border-slate-200 align-top text-sm details font-semibold mmm-primary">Launch Pinnacle Program awareness campaigns to clients with VAs tenured 10+ months.</td>
                                </tr>
                                 <tr class="bg-white">
                                    <td class="p-3 font-semibold border border-slate-200 align-top">Q2 (Apr-Jun)</td>
                                    <td class="p-3 border border-slate-200 align-top text-sm details">Post-Q1 performance reviews in the US confirm the VA's value and ROI. This is a key trigger for clients to convert a successful placement into a permanent hire before mid-year budget adjustments.</td>
                                     <td class="p-3 border border-slate-200 align-top text-sm details font-semibold mmm-primary">Proactively schedule strategic reviews in May, presenting the Pinnacle Program as a solution for retaining top talent.</td>
                                </tr>
                                 <tr class="bg-white">
                                    <td class="p-3 font-semibold border border-slate-200 align-top">Q3 (Jul-Sep)</td>
                                    <td class="p-3 border border-slate-200 align-top text-sm details">As US clients reassess mid-year budgets and plan for Q4, securing essential personnel becomes a top priority, creating another buyout window before the end-of-year rush.</td>
                                    <td class="p-3 border border-slate-200 align-top text-sm details font-semibold mmm-primary">Initiate conversations in August, positioning the Program as a way to secure critical VAs for EOY goals.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                     <div class="lg:col-span-1">
                        <h2 class="text-3xl font-black main-title mb-2 mmm-primary">The Two Stories of VA Resignation</h2>
                        <p class="details text-lg">This analysis of 418 resignations reveals a critical insight: the reasons VAs leave change dramatically with tenure. The chart opposite visualizes this shift, making the case for a targeted retention strategy.</p>
                        <div class="mt-4 p-4 rounded-lg bg-slate-50 border border-slate-200">
                             <h4 class="font-bold main-title">The Narrative: Under 1 Year</h4>
                              <p class="text-md font-semibold subtitle mb-2">Avg. Tenure: 153 Days</p>
                             <p class="details text-sm mt-1">Early resignations are a mix of preventable issues. While many VAs seek other opportunities, a notable portion leaves due to tangible performance problems. This is where we must <em>improve our screening and early-support processes.</em></p>
                        </div>
                        <div class="mt-4 p-4 rounded-lg bg-slate-50 border border-slate-200">
                            <h4 class="font-bold main-title">The Narrative: After 1 Year</h4>
                             <p class="text-md font-semibold subtitle mb-2">Avg. Tenure: 695 Days</p>
                            <p class="details text-sm mt-1">The story flips completely for long-term VAs. Negative performance issues become statistically insignificant. The overwhelming driver is the search for "Better Opportunities," strongly indicating that these proven VAs are being pursued for direct-hire roles—the <em>exact scenario the Pinnacle Program is designed for.</em></p>
                        </div>
                    </div>
                    <div class="lg:col-span-1 chart-container h-96">
                        <canvas id="comparativeResignationChart"></canvas>
                         <p class="footer text-center mt-2">Click a category on the chart for a detailed breakdown.</p>
                    </div>
                </div>
            </div>

             <div class="card p-6">
                <h2 class="text-2xl font-bold main-title mb-2 text-center mmm-primary">Our Competitive Edge</h2>
                <div class="max-w-2xl mx-auto mt-6">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr>
                                <th class="p-3 font-bold uppercase bg-teal-50 text-teal-800 border border-teal-200">Competitor</th>
                                <th class="p-3 font-bold uppercase bg-teal-50 text-teal-800 border border-teal-200 text-center">Formal Buyout Program</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white">
                                <td class="p-3 font-semibold border border-slate-200">Hello Rache</td>
                                <td class="p-3 border border-slate-200 text-center text-2xl">❌</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="p-3 font-semibold border border-slate-200">MedVA</td>
                                <td class="p-3 border border-slate-200 text-center text-2xl">❌</td>
                            </tr>
                             <tr class="bg-white">
                                <td class="p-3 font-semibold border border-slate-200">REVA Global</td>
                                <td class="p-3 border border-slate-200 text-center text-2xl">❌</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="details text-center max-w-3xl mx-auto mt-6">A comprehensive review of our top competitors reveals a significant market opportunity. None publicly offer a formal, proactive buyout program. They rely on standard, defensive non-solicitation clauses.</p>
                <p class="details mt-4 font-bold mmm-primary text-center text-lg">The Pinnacle Program is a market-first offering that positions MMM as a more mature, transparent, and strategic partner, giving us a powerful advantage in attracting both discerning clients and top-tier VA talent.</p>
            </div>
        </div>
    </div>

    <!-- Q&A Tab -->
    <div id="qna" class="tab-content">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <div class="card p-6">
                <h2 class="text-2xl font-bold main-title mb-2 mmm-primary">Executive Summary</h2>
                <p class="details mb-4">This proposal outlines the data-driven case for the Pinnacle Program, a strategic initiative to formalize VA buyouts, creating a new revenue stream while increasing client and VA retention.</p>
                 <div class="space-y-4">
                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200">
                        <h3 class="font-bold text-lg main-title">The Problem</h3>
                        <p class="details text-sm mt-1">Our biggest source of controllable churn is <strong>VA Resignation (418 of 1,011 cancellations)</strong>, particularly among long-term VAs who are not leaving due to performance issues but are seeking direct-hire roles. This represents a significant and predictable revenue loss.</p>
                    </div>
                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200">
                        <h3 class="font-bold text-lg main-title">The Solution</h3>
                        <p class="details text-sm mt-1">The Pinnacle Program is a formal, tiered buyout policy that allows clients to legally and seamlessly hire their VAs. It's a <strong>"win-win-win"</strong> that retains the client relationship, fulfills the VA's career goals, and converts a business risk for MMM into a profitable outcome.</p>
                    </div>
                     <div class="p-4 rounded-lg bg-slate-50 border border-slate-200">
                        <h3 class="font-bold text-lg main-title">The Opportunity</h3>
                        <p class="details text-sm mt-1">We project <strong>$1.66 million</strong> in new revenue in the first 20 months. As a market-first offering, this program gives us a powerful competitive advantage over rivals like Hello Rache and MedVA, positioning us as the premier partner for serious, long-term growth.</p>
                    </div>
                </div>
            </div>
            <div class="card p-6">
                <h2 class="text-2xl font-bold main-title mb-2 text-center mmm-primary">Strategic Q&A</h2>
                <p class="details text-center mb-6">Have a question? Ask VA-lueLens for an instant, data-backed answer.</p>
                
                <div id="chat-window" class="h-80 overflow-y-auto p-4 bg-slate-50 rounded-lg border border-slate-200 mb-4 space-y-4">
                     <div class="flex">
                        <div class="rounded-lg p-3 bg-teal-100 text-teal-900">
                            <p class="font-bold">VA-lueLens</p>
                            <p class="text-sm">I'm ready to answer your questions based on the data in this proposal. For example: "Why do we project buyouts will peak in January?"</p>
                        </div>
                    </div>
                </div>

                <div class="flex items-center">
                    <input type="text" id="chat-input" class="w-full p-3 border border-slate-300 rounded-l-lg focus:ring-2 focus:ring-teal-500 focus:outline-none" placeholder="Ask your question here...">
                    <button id="send-btn" class="p-3 bg-teal-600 text-white rounded-r-lg hover:bg-teal-700 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                    </button>
                </div>
                 <div id="loader" class="text-center mt-4 hidden">
                    <p class="text-slate-500">VA-lueLens is thinking...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="details-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl font-bold main-title">Breakdown</h3>
                <button onclick="closeModal()" class="text-slate-500 hover:text-slate-800 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-body"></div>
        </div>
    </div>


    <script>
        function changeTab(event, tabID) {
            let tabs = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            document.getElementById(tabID).classList.add('active');
            let tabButtons = document.getElementsByClassName('tab-button');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            event.currentTarget.classList.add('active');
        }

        const modal = document.getElementById('details-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');

        function showModal(title, content) {
            modalTitle.innerText = title;
            modalBody.innerHTML = content;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        // Close modal if overlay is clicked
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });


        document.addEventListener('DOMContentLoaded', () => {
            Chart.register(ChartDataLabels);

            const mmmColors = {
                primary: '#00585E',   // MMM Teal Dark
                secondary: '#00A99D', // MMM Teal Light
                accent: '#F37A20',    // MMM Orange
                gray: '#94a3b8',      // slate-400
                red: '#ef4444' // red-500 for negative
            };

            const cancellationBreakdown = {
                'Resign': 'Better Opps: 66\nCommitment: 20\nDemotivation: 10\nPerformance: 19\nOthers: 303',
                'Client Set-Up': 'No specific VA issues provided.',
                'Financial Reason': 'No specific VA issues provided.'
            };

            // Main Dashboard Charts
            new Chart(document.getElementById('cancellationReasonsChart'), {
                type: 'bar',
                data: {
                    labels: ['Resign', 'Client Set-Up', 'Financial Reason'],
                    datasets: [{
                        label: 'Number of Cancellations',
                        data: [418, 312, 281],
                        backgroundColor: [mmmColors.primary, mmmColors.secondary, mmmColors.accent],
                        borderRadius: 4
                    }]
                },
                options: { 
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', 
                    plugins: { 
                        legend: { display: false },
                        tooltip: { callbacks: { afterBody: (c) => cancellationBreakdown[c[0].label] || '' } }
                    }, 
                    scales: { x: { beginAtZero: true } }
                }
            });

             new Chart(document.getElementById('paretoChart'), {
                type: 'bar',
                data: {
                    labels: ['VA Resignations', 'Other Reasons'],
                    datasets: [{
                        label: 'Cancellations',
                        data: [418, 593],
                         backgroundColor: [mmmColors.primary, mmmColors.gray],
                         borderRadius: 4
                    }]
                },
                options: {
                     responsive: true,
                    maintainAspectRatio: false,
                     plugins: { legend: { display: false } },
                     scales: { y: { beginAtZero: true } }
                }
            });
            
            new Chart(document.getElementById('monthlyTrendsChartDetail'), {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [
                        { label: 'Resign', data: [22, 15, 16, 18, 25, 18, 17, 26, 20, 15, 14, 18], borderColor: mmmColors.primary, tension: 0.4, fill: false },
                        { label: 'Client Set-Up', data: [13, 9, 10, 12, 14, 10, 10, 15, 12, 9, 8, 11], borderColor: mmmColors.secondary, tension: 0.4, fill: false },
                        { label: 'Financial', data: [10, 6, 6, 8, 9, 7, 6, 8, 8, 7, 6, 7], borderColor: mmmColors.accent, tension: 0.4, fill: false }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });
            
            const tenureDetails = {
                 '⭐ Opportunity-Seeking': {
                    '< 1 Year': { 'Better Opps LOCAL': 25, 'Better Opps OVERSEAS': 3, 'Commitment Issues': 15, 'Demotivation of VA': 8 },
                    '> 1 Year': { 'Better Opps LOCAL': 28, 'Better Opps OVERSEAS': 10, 'Commitment Issues': 5, 'Demotivation of VA': 2 }
                },
                'Performance-Related': {
                    '< 1 Year': { 'Quality': 12, 'Quantity': 5 },
                    '> 1 Year': { 'Quality': 1, 'Quantity': 1 }
                },
                'Others': {
                     '< 1 Year': { 'Not Specified': 221 },
                    '> 1 Year': { 'Not Specified': 82 }
                }
            };
            
            function createTableHTML(data) {
                let table = '<table class="w-full text-sm text-left"><thead><tr class="bg-slate-50"><th class="p-2">VA Issue</th><th class="p-2 text-center">< 1 Year</th><th class="p-2 text-center">> 1 Year</th></tr></thead><tbody>';
                const allKeys = [...new Set([...Object.keys(data['< 1 Year']), ...Object.keys(data['> 1 Year'])])];
                allKeys.forEach(key => {
                    table += `<tr class="border-b"><td class="p-2 font-semibold">${key}</td><td class="p-2 text-center">${data['< 1 Year'][key] || 0}</td><td class="p-2 text-center">${data['> 1 Year'][key] || 0}</td></tr>`;
                });
                table += '</tbody></table>';
                return table;
            }


            // TWO STORIES COMPARATIVE BAR CHART
            const comparativeResignationChart = new Chart(document.getElementById('comparativeResignationChart'), {
                type: 'bar',
                data: {
                    labels: ['⭐ Opportunity-Seeking', 'Performance-Related', 'Others'],
                    datasets: [
                        {
                            label: '< 1 Year',
                            data: [51, 17, 221],
                            backgroundColor: mmmColors.secondary,
                            borderRadius: 4
                        },
                        {
                            label: '> 1 Year',
                            data: [45, 2, 82],
                            backgroundColor: mmmColors.primary,
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (evt, elements, chart) => {
                        if (elements.length > 0) {
                            const canvas = chart.canvas;
                            const rect = canvas.getBoundingClientRect();
                            const x = evt.clientX - rect.left;
                        
                            const xAxis = chart.scales.x;
                            const labels = chart.data.labels;

                            const index = xAxis.getValueForPixel(x);
                            const category = labels[index];

                            if (category) {
                                const tableData = tenureDetails[category];
                                if(tableData){
                                    const tableHTML = createTableHTML(tableData);
                                    showModal(`Breakdown for: ${category}`, tableHTML);
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                afterBody: function(context) {
                                    const category = context.label;
                                    const tenure = context.dataset.label;
                                    const detailsObject = tenureDetails[category] ? tenureDetails[category][tenure] : null;
                                    if (detailsObject) {
                                        return Object.entries(detailsObject).map(([key, value]) => `\n- ${key}: ${value}`).join('');
                                    }
                                    return '';
                                }
                            }
                        }
                    },
                    scales: { y: { beginAtZero: true } }
                }
            });

            // --- Gemini API Chatbot Logic ---
            const chatInput = document.getElementById('chat-input');
            const sendBtn = document.getElementById('send-btn');
            const chatWindow = document.getElementById('chat-window');
            const loader = document.getElementById('loader');

            const API_KEY = "AIzaSyB3cbctAyDUexcLt71hg5JnxpYQ1yE1D9U";
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;

            const systemPrompt = `You are VA-lueLens, an expert data analyst and CEO for My Mountain Mover (MMM), a virtual assistant agency specializing in the US medical field. You are answering questions from your own CEO based on a strategic proposal you created called The Pinnacle Program. All your answers must be based *only* on the provided data context. Be concise, professional, and confident.

            ## Full Proposal & Data Context ##

            **1. Program Overview:**
            - **Name:** The Pinnacle Program.
            - **Concept:** A formal, tiered buyout option for clients to legally and seamlessly hire their VAs directly. It replaces a punitive non-solicitation clause.
            - **Goal:** Convert the business risk of clients "poaching" VAs into a high-margin revenue stream, strengthen client and VA retention, and create a unique competitive advantage.
            - **Fee Structure:** Starts at $25,000 for VAs with 91-365 days of tenure, decreasing with longer tenures.

            **2. Core Data Analysis (from 1,011 cancellations of VAs with >90 days tenure):**
            - **Primary Reason for Cancellation:** VA Resignation is the #1 reason, accounting for 418 of 1,011 cancellations (41%). Other reasons are Client Set-Up (312) and Financial Reasons (281).
            - **The "Two Stories" of Resignation (418 total resignations):**
                - **Under 1 Year (289 VAs):** Average tenure is 153 days. 51 resigned for "Opportunity-Seeking" reasons, 17 for "Performance-Related" issues, and 221 for "Others" (mostly unspecified). *Insight: A mix of preventable performance issues and early-career job seeking.*
                - **Over 1 Year (129 VAs):** Average tenure is 695 days. 45 resigned for "Opportunity-Seeking" reasons, only 2 for "Performance-Related" issues, and 82 for "Others." *Insight: Performance is not the issue. These are proven, successful VAs who are leaving for better opportunities, strongly implying direct-hire offers.*
            - **Breakdown of "Opportunity-Seeking" (<1 Year vs. >1 Year):**
                - Better Opps LOCAL: 25 vs. 28
                - Better Opps OVERSEAS: 3 vs. 10
                - Commitment Issues: 15 vs. 5
                - Demotivation of VA: 8 vs. 2
            - **Breakdown of "Performance-Related" (<1 Year vs. >1 Year):**
                - Quality: 12 vs. 1
                - Quantity: 5 vs. 1

            **3. Financial & Market Opportunity:**
            - **Projected Revenue:** $1.66 million in new, high-margin revenue is projected over the first 20 months, based on converting a conservative 20% of applicable resignations.
            - **Competitive Edge:** Top competitors (Hello Rache, MedVA, REVA Global) DO NOT have a similar formal, proactive buyout program. This is a market-first offering for MMM.

            **4. Strategic Forecasting (The Buyout Calendar):**
            - **Q1 (Peak: Jan):** Triggered by US clients' new annual budgets and Filipino VAs receiving their "13th month pay" in December, making them active job seekers.
            - **Q2 (Peak: May):** Triggered by post-Q1 performance reviews in the US confirming a VA's value.
            - **Q3 (Peak: Aug):** Triggered by mid-year budget reassessments and planning for Q4 in the US.

            **5. The Value Proposition (The "Win-Win-Win"):**
            - **Client Wins:** Retains a proven, invaluable team member.
            - **VA Wins:** Achieves their primary long-term career goal of a direct-hire role.
            - **MMM Wins:** Converts a revenue loss into a profit center and strengthens the client relationship.`;
            
            const sendMessage = async () => {
                const userQuery = chatInput.value.trim();
                if (!userQuery) return;
                
                appendMessage(userQuery, 'user');
                chatInput.value = '';
                loader.classList.remove('hidden');

                try {
                    const payload = {
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                    };

                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.json();
                        console.error("API Error Response:", errorBody);
                        throw new Error(`API error: ${response.statusText}`);
                    }

                    const result = await response.json();
                    const aiResponse = result.candidates[0].content.parts[0].text;
                    appendMessage(aiResponse, 'ai');

                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    appendMessage("I'm sorry, I encountered an error trying to process that. Please check the console for details.", 'ai');
                } finally {
                     loader.classList.add('hidden');
                }
            };

            const appendMessage = (text, sender) => {
                const messageDiv = document.createElement('div');
                const bubble = document.createElement('div');
                bubble.classList.add('rounded-lg', 'p-3');
                
                if (sender === 'user') {
                    messageDiv.classList.add('flex', 'justify-end');
                    bubble.classList.add('bg-blue-100', 'text-blue-900');
                    bubble.innerHTML = `<p class="text-sm">${text}</p>`;
                } else {
                    messageDiv.classList.add('flex');
                    bubble.classList.add('bg-teal-100', 'text-teal-900');
                    bubble.innerHTML = `<p class="font-bold">VA-lueLens</p><p class="text-sm">${text.replace(/\n/g, '<br>')}</p>`;
                }
                
                messageDiv.appendChild(bubble);
                chatWindow.appendChild(messageDiv);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            };

            sendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });
    </script>
</body>
</html>

